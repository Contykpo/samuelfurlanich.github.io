@inject IJSRuntime js
@inject IStringLocalizer<Resource> Localizer

<nav class="navbar" id="navbar">
    <div class="navbar-title">
        <h5>
            <a href="#home" class="navbar-logo">Samuel Furlanich</a>
        </h5>

        @if (string.IsNullOrWhiteSpace(property.GitHub) is false)
        {
            <a href="https://github.com/@(property.GitHub)" target="_blank" rel="noopener noreferrer" style="padding-left: 1rem;">
                <img src="@icons!.GitHubAlternative" alt="GitHub" class="social-icon" />
            </a>
        }
        @if (string.IsNullOrWhiteSpace(property.LinkedIn) is false)
        {
            <a href="https://www.linkedin.com/in/samuel-furlanich-7b7838227/" target="_blank" rel="noopener noreferrer" style="padding-left: 1rem;">
                <img src="@icons!.LinkedInAlternative" alt="LinkedIn" class="social-icon" />
            </a>
        }
    </div>

    <div class="navbar-links">
        <a href="#about">@Localizer["about"]</a>
        <a href="#portfolio">@Localizer["projects"]</a>
        <a href="#contactinfo">@Localizer["contact"]</a>
        <div class="top-row px-4">
            <CultureSelector Http=@Http />
        </div>
    </div>

    <button class="hamburger" @onclick="ToggleMenu">
        <!-- Hamburger Icon -->
        &#9776;
    </button>

</nav>

<div class="side-panel" style="transform: @(isMenuOpen ? "translateX(0)" : "translateX(100%)")">
    <div class="panel-content">
        <div class="vertical-links">
            <a href="#about" @onclick="CloseMenu">@Localizer["about"]</a>
            <a href="#portfolio" @onclick="CloseMenu">@Localizer["projects"]</a>
            <a href="#contactinfo" @onclick="CloseMenu">@Localizer["contact"]</a>
        </div>

        <div class="horizontal-buttons">
            <CultureSelector Http=@Http />
        </div>
    </div>
</div>


@code
{
    [Parameter, EditorRequired]
    public required HttpClient Http { get; set; }

    private SiteProperties? property;
    private SocialIcons? icons;

    private bool isMenuOpen = false;

    protected override async Task OnInitializedAsync()
    {
        property = await Http.GetFromJsonAsync<SiteProperties>("data/siteproperties.json");

        icons = await Http.GetFromJsonAsync<SocialIcons>("data/socialicons.json");
    }

    private void ToggleMenu() => isMenuOpen = !isMenuOpen;

    private void CloseMenu() => isMenuOpen = false;

}
